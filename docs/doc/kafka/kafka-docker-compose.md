# Docker Compose –¥–ª—è –∑–∞–ø—É—Å–∫–∞ Kafka:

```shell
version: '3.8'

services:
  kafka:
    image: bitnami/kafka:3.7.0
    container_name: kafka
    ports:
      - "9092:9092"   # –¥–ª—è –ø—Ä–∏–ª–æ–∂–µ–Ω–∏–π
      - "9094:9094"   # –¥–ª—è –≤–Ω–µ—à–Ω–µ–≥–æ –¥–æ—Å—Ç—É–ø–∞
    environment:
      # –û—Å–Ω–æ–≤–Ω—ã–µ –Ω–∞—Å—Ç—Ä–æ–π–∫–∏ KRaft
      KAFKA_CFG_NODE_ID: 1
      KAFKA_CFG_PROCESS_ROLES: broker,controller
      KAFKA_CFG_CONTROLLER_QUORUM_VOTERS: 1@kafka:9093
      KAFKA_CFG_LISTENERS: PLAINTEXT://:9092,CONTROLLER://:9093,PLAINTEXT_HOST://:9094
      KAFKA_CFG_ADVERTISED_LISTENERS: PLAINTEXT://kafka:9092,PLAINTEXT_HOST://localhost:9094
      KAFKA_CFG_LISTENER_SECURITY_PROTOCOL_MAP: PLAINTEXT:PLAINTEXT,CONTROLLER:PLAINTEXT,PLAINTEXT_HOST:PLAINTEXT
      KAFKA_CFG_CONTROLLER_LISTENER_NAMES: CONTROLLER
      KAFKA_CFG_INTER_BROKER_LISTENER_NAME: PLAINTEXT
      ALLOW_PLAINTEXT_LISTENER: "yes"
      KAFKA_CFG_AUTO_CREATE_TOPICS_ENABLE: "true"
      KAFKA_CFG_NUM_PARTITIONS: 3
    volumes:
      - kafka-data:/bitnami/kafka

  kafka-ui:
    image: provectuslabs/kafka-ui:latest
    container_name: kafka-ui
    ports:
      - "8080:8080"
    environment:
      KAFKA_CLUSTERS_0_NAME: local
      KAFKA_CLUSTERS_0_BOOTSTRAPSERVERS: kafka:9092
      KAFKA_CLUSTERS_0_ZOOKEEPER: ""  # –î–ª—è KRaft –Ω–µ –Ω—É–∂–µ–Ω Zookeeper
    depends_on:
      - kafka

volumes:
  kafka-data:


# KRaft:
# –ò—Å–ø–æ–ª—å–∑—É–µ–º Bitnami Kafka (–±–µ–∑ Zookeeper).
# –ù–∞—Å—Ç—Ä–æ–µ–Ω—ã PROCESS_ROLES ‚Üí broker,controller (Kafka –≤ —Ä–µ–∂–∏–º–µ KRaft).
# –ö–æ–Ω—Ç—Ä–æ–ª–ª–µ—Ä —Å–ª—É—à–∞–µ—Ç –Ω–∞ 9093.
# –ë—Ä–æ–∫–µ—Ä —Å–ª—É—à–∞–µ—Ç –Ω–∞ 9092 (–¥–ª—è –ø—Ä–∏–ª–æ–∂–µ–Ω–∏–π) –∏ 9094 (–¥–ª—è –¥–æ—Å—Ç—É–ø–∞ —Å —Ö–æ—Å—Ç–∞).
#
# Kafka UI:
# Provectus Kafka UI –Ω–∞ –ø–æ—Ä—Ç—É 8080.
# –ü–æ–¥–∫–ª—é—á–∞–µ—Ç—Å—è –Ω–∞–ø—Ä—è–º—É—é –∫ kafka:9092 (–≤ Docker-—Å–µ—Ç–∏).
#
# –ê–≤—Ç–æ—Å–æ–∑–¥–∞–Ω–∏–µ —Ç–æ–ø–∏–∫–æ–≤:
# KAFKA_CFG_AUTO_CREATE_TOPICS_ENABLE=true
# KAFKA_CFG_NUM_PARTITIONS=3 (–¥–µ—Ñ–æ–ª—Ç –¥–ª—è –Ω–æ–≤—ã—Ö —Ç–æ–ø–∏–∫–æ–≤).

# Kafka –¥–æ—Å—Ç—É–ø–Ω–∞ –Ω–∞ localhost:9094 (–¥–ª—è —Å–µ—Ä–≤–∏—Å–æ–≤).
#Kafka UI ‚Üí http://localhost:8080
```

# –ü–æ—è—Å–Ω–µ–Ω–∏–µ

## –ß—Ç–æ —Ç–∞–∫–æ–µ **KRaft**?

–†–∞–Ω—å—à–µ Kafka –∏—Å–ø–æ–ª—å–∑–æ–≤–∞–ª–∞ **Zookeeper** –¥–ª—è —Ö—Ä–∞–Ω–µ–Ω–∏—è –º–µ—Ç–∞–¥–∞–Ω–Ω—ã—Ö –∫–ª–∞—Å—Ç–µ—Ä–∞ (
—Ç–æ–ø–∏–∫–∏, –ø–∞—Ä—Ç–∏—Ü–∏–∏, –∫–æ–Ω—Ç—Ä–æ–ª–ª–µ—Ä—ã).
–ù–æ —Å –≤–µ—Ä—Å–∏–∏ **3.3+** –ø–æ—è–≤–∏–ª—Å—è —Ä–µ–∂–∏–º **KRaft (Kafka Raft)**, –≥–¥–µ **Zookeeper
—É–±—Ä–∞–ª–∏**, –∞ Kafka —Å–∞–º–∞ —É–ø—Ä–∞–≤–ª—è–µ—Ç –º–µ—Ç–∞–¥–∞–Ω–Ω—ã–º–∏.

### **–ö–∞–∫ —Ä–∞–±–æ—Ç–∞–µ—Ç KRaft?**

* –í –∫–ª–∞—Å—Ç–µ—Ä–µ –µ—Å—Ç—å **–∫–æ–Ω—Ç—Ä–æ–ª–ª–µ—Ä—ã** (controller) ‚Üí –æ—Ç–≤–µ—á–∞—é—Ç –∑–∞ –º–µ—Ç–∞–¥–∞–Ω–Ω—ã–µ: —Ç–æ–ø–∏–∫–∏,
  ACL, –ª–∏–¥–µ—Ä—ã –ø–∞—Ä—Ç–∏—Ü–∏–π.
* –ï—Å—Ç—å **–±—Ä–æ–∫–µ—Ä—ã** (broker) ‚Üí —Ö—Ä–∞–Ω—è—Ç –¥–∞–Ω–Ω—ã–µ (–ø–∞—Ä—Ç–∏—Ü–∏–∏) –∏ –ø—Ä–∏–Ω–∏–º–∞—é—Ç –∑–∞–ø—Ä–æ—Å—ã –æ—Ç
  –ø—Ä–æ–¥—é—Å–µ—Ä–æ–≤/–∫–æ–Ω—Å—å—é–º–µ—Ä–æ–≤.
* –ö–æ–Ω—Ç—Ä–æ–ª–ª–µ—Ä—ã –∏—Å–ø–æ–ª—å–∑—É—é—Ç **Raft consensus protocol** (–æ—Ç—Å—é–¥–∞ –Ω–∞–∑–≤–∞–Ω–∏–µ **KRaft
  **), —á—Ç–æ–±—ã –¥–æ–≥–æ–≤–æ—Ä–∏—Ç—å—Å—è, –∫—Ç–æ –ª–∏–¥–µ—Ä.

## ‚úÖ –†–æ–ª–∏: **broker** –∏ **controller**

* **Broker** ‚Äì –æ–±—ã—á–Ω—ã–π –±—Ä–æ–∫–µ—Ä Kafka: –ø—Ä–∏–Ω–∏–º–∞–µ—Ç —Å–æ–æ–±—â–µ–Ω–∏—è, –ø–∏—à–µ—Ç –∏—Ö –Ω–∞ –¥–∏—Å–∫,
  –æ—Ç–¥–∞—ë—Ç –∫–æ–Ω—Å—å—é–º–µ—Ä–∞–º.
* **Controller** ‚Äì —É–∑–µ–ª, —É–ø—Ä–∞–≤–ª—è—é—â–∏–π –º–µ—Ç–∞–¥–∞–Ω–Ω—ã–º–∏ (–≤–º–µ—Å—Ç–æ Zookeeper).
* –í **KRaft** –æ–¥–∏–Ω –∏ —Ç–æ—Ç –∂–µ —Å–µ—Ä–≤–µ—Ä –º–æ–∂–µ—Ç –±—ã—Ç—å –∏ **broker**, –∏ **controller** (
  –∫–∞–∫ –≤ —Ç–≤–æ—ë–º –ø—Ä–∏–º–µ—Ä–µ).
* –í –ø—Ä–æ–¥–∞–∫—à–µ–Ω–µ –æ–±—ã—á–Ω–æ **–º–∏–Ω–∏–º—É–º 3 –∫–æ–Ω—Ç—Ä–æ–ª–ª–µ—Ä–∞** (–¥–ª—è –∫–≤–æ—Ä—É–º–∞), –Ω–æ –≤ dev –º–æ–∂–Ω–æ
  –æ–¥–∏–Ω.

---

## ‚úÖ –ü–æ—á–µ–º—É —Ä–∞–∑–Ω—ã–µ –ø–æ—Ä—Ç—ã?

Kafka –∑–∞–ø—É—Å–∫–∞–µ—Ç **–Ω–µ—Å–∫–æ–ª—å–∫–æ listeners** –¥–ª—è —Ä–∞–∑–Ω—ã—Ö —Ü–µ–ª–µ–π:

| Listener                 | –ù–∞–∑–Ω–∞—á–µ–Ω–∏–µ                                              |
|--------------------------|---------------------------------------------------------|
| `PLAINTEXT://:9092`      | –û—Å–Ω–æ–≤–Ω–æ–π listener –¥–ª—è –≤–Ω—É—Ç—Ä–µ–Ω–Ω–∏—Ö —Å–µ—Ä–≤–∏—Å–æ–≤ –≤ —Å–µ—Ç–∏ Docker |
| `CONTROLLER://:9093`     | –ö–∞–Ω–∞–ª –¥–ª—è –∫–æ–Ω—Ç—Ä–æ–ª–ª–µ—Ä–æ–≤ (–º–µ—Ç–∞–¥–∞–Ω–Ω—ã–µ)                     |
| `PLAINTEXT_HOST://:9094` | –î–ª—è –ø–æ–¥–∫–ª—é—á–µ–Ω–∏—è **—Å —Ö–æ—Å—Ç–∞** (localhost)                 |

**–ü–æ—á–µ–º—É –Ω–µ–ª—å–∑—è –æ–¥–∏–Ω –ø–æ—Ä—Ç?**
–ü–æ—Ç–æ–º—É —á—Ç–æ:

* –ö–æ–Ω—Ç—Ä–æ–ª–ª–µ—Ä—ã –æ–±—â–∞—é—Ç—Å—è –ø–æ –æ—Ç–¥–µ–ª—å–Ω–æ–º—É –ø—Ä–æ—Ç–æ–∫–æ–ª—É (Raft) ‚Üí –Ω—É–∂–µ–Ω `9093`.
* –ö–ª–∏–µ–Ω—Ç—ã –≤–Ω—É—Ç—Ä–∏ Docker –ø–æ–¥–∫–ª—é—á–∞—é—Ç—Å—è –∫ `kafka:9092`.
* –ö–ª–∏–µ–Ω—Ç—ã –Ω–∞ —Ö–æ—Å—Ç–µ (—Ç–≤–æ–∏ —Å–µ—Ä–≤–∏—Å—ã –Ω–∞ –º–∞—à–∏–Ω–µ) ‚Üí `localhost:9094`.

**Advertised listeners** —Ä–µ—à–∞—é—Ç –ø—Ä–æ–±–ª–µ–º—É:

* –í–Ω—É—Ç—Ä–∏ —Å–µ—Ç–∏ Docker ‚Üí `kafka:9092`
* –°–Ω–∞—Ä—É–∂–∏ (—Å —Ç–≤–æ–µ–≥–æ –Ω–æ—É—Ç–±—É–∫–∞) ‚Üí `localhost:9094`

---

## ‚úÖ –°–∫–æ–ª—å–∫–æ –Ω—É–∂–Ω–æ –±—Ä–æ–∫–µ—Ä–æ–≤ –∏ –∫–æ–Ω—Ç—Ä–æ–ª–ª–µ—Ä–æ–≤?

* **DEV/LOCAL** ‚Üí 1 —É–∑–µ–ª (broker+controller) —Ö–≤–∞—Ç–∞–µ—Ç.
* **PROD**:

    * **3 –∫–æ–Ω—Ç—Ä–æ–ª–ª–µ—Ä–∞** (–¥–ª—è –æ—Ç–∫–∞–∑–æ—É—Å—Ç–æ–π—á–∏–≤–æ—Å—Ç–∏ –º–µ—Ç–∞–¥–∞–Ω–Ω—ã—Ö).
    * **3+ –±—Ä–æ–∫–µ—Ä–∞** (–¥–ª—è –¥–∞–Ω–Ω—ã—Ö, replication factor ‚â• 3).

---

## ‚úÖ –í–∞–∂–Ω–æ:

* KRaft –ø–æ–ª–Ω–æ—Å—Ç—å—é —É–±–∏—Ä–∞–µ—Ç Zookeeper.
* –ú–µ—Ç–∞–¥–∞–Ω–Ω—ã–µ —Ç–µ–ø–µ—Ä—å —Ö—Ä–∞–Ω—è—Ç—Å—è –ø—Ä—è–º–æ –≤ Kafka.
* –í—Å–µ —É–∑–ª—ã (–∫–æ–Ω—Ç—Ä–æ–ª–ª–µ—Ä—ã) –∏—Å–ø–æ–ª—å–∑—É—é—Ç **Raft** –¥–ª—è –∫–æ–Ω—Å–µ–Ω—Å—É—Å–∞.

---

# –í docker-compose –∫–ª–∞—Å—Ç–µ—Ä –∏–∑ 3 –±—Ä–æ–∫–µ—Ä–æ–≤ –∏ 3 –∫–æ–Ω—Ç—Ä–æ–ª–ª–µ—Ä–æ–≤ (KRaft). –ö–∞–∫ —Å–æ–∑–¥–∞—ë—Ç—Å—è —Ç–æ–ø–∏–∫ —Å 3 –ø–∞—Ä—Ç–∏—Ü–∏—è–º–∏ –∏ replication factor 3 –≤ —ç—Ç–æ–º —Ä–µ–∂–∏–º–µ?

–û—Ç–ª–∏—á–Ω–æ, –æ–±—ä—è—Å–Ω—è—é –æ–±–∞ –ø—É–Ω–∫—Ç–∞ —Å—Ä–∞–∑—É:

---

## ‚úÖ 1. **–ö–∞–∫ —Å–¥–µ–ª–∞—Ç—å –∫–ª–∞—Å—Ç–µ—Ä Kafka –≤ KRaft —Ä–µ–∂–∏–º–µ (3 –±—Ä–æ–∫–µ—Ä–∞ + 3 –∫–æ–Ω—Ç—Ä–æ–ª–ª–µ—Ä–∞) –≤

Docker Compose**

–í KRaft –º–æ–∂–Ω–æ –æ–±—ä–µ–¥–∏–Ω–∏—Ç—å **broker** –∏ **controller** –Ω–∞ –æ–¥–Ω–æ–º —É–∑–ª–µ (–¥–ª—è
—É–ø—Ä–æ—â–µ–Ω–∏—è), –Ω–æ –¥–ª—è –æ—Ç–∫–∞–∑–æ—É—Å—Ç–æ–π—á–∏–≤–æ—Å—Ç–∏ –¥–µ–ª–∞–µ–º 3 –æ—Ç–¥–µ–ª—å–Ω—ã—Ö –∫–æ–Ω—Ç–µ–π–Ω–µ—Ä–∞.

### **–ü—Ä–∏–º–µ—Ä docker-compose.yml**

[docker-compose-2.yml](../../files/docker-compose-2.yml)

### **–ß—Ç–æ –≤–∞–∂–Ω–æ –≤ —ç—Ç–æ–º compose:**

* **KAFKA\_NODE\_ID** ‚Äì —É–Ω–∏–∫–∞–ª—å–Ω—ã–π ID —É–∑–ª–∞.
* **KAFKA\_PROCESS\_ROLES=broker,controller** ‚Äì –∫–∞–∂–¥—ã–π —É–∑–µ–ª –∏ –±—Ä–æ–∫–µ—Ä, –∏
  –∫–æ–Ω—Ç—Ä–æ–ª–ª–µ—Ä.
* **KAFKA\_CONTROLLER\_QUORUM\_VOTERS** ‚Äì —Å–ø–∏—Å–æ–∫ –≤—Å–µ—Ö –∫–æ–Ω—Ç—Ä–æ–ª–ª–µ—Ä–æ–≤ —Å –∏—Ö –ø–æ—Ä—Ç–∞–º–∏
  `9093`.
* **KAFKA\_LISTENERS**:

    * `PLAINTEXT://:9092` ‚Äì –¥–ª—è –∫–ª–∏–µ–Ω—Ç–æ–≤ (–ø—Ä–æ–¥—é—Å–µ—Ä–æ–≤/–∫–æ–Ω—Å—å—é–º–µ—Ä–æ–≤).
    * `CONTROLLER://:9093` ‚Äì –¥–ª—è Raft-–∫–≤–æ—Ä—É–º–∞.
* **KAFKA\_ADVERTISED\_LISTENERS** ‚Äì –∫–∞–∫ –±—Ä–æ–∫–µ—Ä –≤–∏–¥–µ–Ω –¥—Ä—É–≥–∏–º —É–∑–ª–∞–º.
* **KAFKA\_CLUSTER\_ID** ‚Äì –æ–±—â–∏–π –∏–¥–µ–Ω—Ç–∏—Ñ–∏–∫–∞—Ç–æ—Ä –∫–ª–∞—Å—Ç–µ—Ä–∞ (–æ–¥–∏–Ω –¥–ª—è –≤—Å–µ—Ö).

üìå –î–ª—è UI (–Ω–∞–ø—Ä–∏–º–µ—Ä, **Kafdrop**) –¥–æ–±–∞–≤—å —Å–µ—Ä–≤–∏—Å:

```yaml
  kafdrop:
    image: obsidiandynamics/kafdrop
    ports:
      - "9000:9000"
    environment:
      KAFKA_BROKERCONNECT: "kafka-1:9092,kafka-2:9092,kafka-3:9092"
```

---

## ‚úÖ 2. **–ö–∞–∫ —Å–æ–∑–¥–∞—Ç—å —Ç–æ–ø–∏–∫ —Å 3 –ø–∞—Ä—Ç–∏—Ü–∏—è–º–∏ –∏ replication factor = 3**

–ö–æ–≥–¥–∞ —É —Ç–µ–±—è –µ—Å—Ç—å 3 –±—Ä–æ–∫–µ—Ä–∞, –º–æ–∂–Ω–æ —Å–æ–∑–¥–∞—Ç—å —Ç–æ–ø–∏–∫ —Å —Ä–µ–ø–ª–∏–∫–∞—Ü–∏–µ–π:

```bash
docker exec -it kafka-1 kafka-topics --create \
  --topic user-topic \
  --partitions 3 \
  --replication-factor 3 \
  --bootstrap-server kafka-1:9092
```

### –ß—Ç–æ —ç—Ç–æ –∑–Ω–∞—á–∏—Ç:

* **--partitions 3** ‚Üí 3 –ø–∞—Ä—Ç–∏—Ü–∏–∏ ‚Üí –º–æ–∂–Ω–æ —á–∏—Ç–∞—Ç—å –ø–∞—Ä–∞–ª–ª–µ–ª—å–Ω–æ –∏–∑ 3 –∫–æ–Ω—Å—å—é–º–µ—Ä–æ–≤
  –æ–¥–Ω–æ–π –≥—Ä—É–ø–ø—ã.
* **--replication-factor 3** ‚Üí –∫–∞–∂–¥—ã–π –±—Ä–æ–∫–µ—Ä —Ö—Ä–∞–Ω–∏—Ç –∫–æ–ø–∏—é –≤—Å–µ—Ö –¥–∞–Ω–Ω—ã—Ö (–ø–æ–≤—ã—à–∞–µ—Ç
  –æ—Ç–∫–∞–∑–æ—É—Å—Ç–æ–π—á–∏–≤–æ—Å—Ç—å).
* **–õ–∏–¥–µ—Ä** –ø–∞—Ä—Ç–∏—Ü–∏–∏ –±—É–¥–µ—Ç –Ω–∞ –æ–¥–Ω–æ–º –±—Ä–æ–∫–µ—Ä–µ, **—Ñ–æ–ª–ª–æ–≤–µ—Ä—ã** –Ω–∞ –¥–≤—É—Ö –¥—Ä—É–≥–∏—Ö.

---

### ‚úÖ –ü–æ—á–µ–º—É –≤–∞–∂–Ω–æ replication factor?

* –ï—Å–ª–∏ replication factor = 1 ‚Üí –ø–æ—Ç–µ—Ä—è–µ—à—å –¥–∞–Ω–Ω—ã–µ –ø—Ä–∏ –ø–∞–¥–µ–Ω–∏–∏ –±—Ä–æ–∫–µ—Ä–∞.
* replication factor = 3 ‚Üí –º–æ–∂–µ—à—å –ø–æ—Ç–µ—Ä—è—Ç—å 2 –±—Ä–æ–∫–µ—Ä–∞ –∏ –≤—Å—ë —Ä–∞–≤–Ω–æ –Ω–µ –ø–æ—Ç–µ—Ä—è–µ—à—å
  –¥–∞–Ω–Ω—ã–µ.

---

## –°—Ö–µ–º–∞ –∫–ª–∞—Å—Ç–µ—Ä–∞ Kafka —Å KRaft, –±—Ä–æ–∫–µ—Ä–∞–º–∏, –∫–æ–Ω—Ç—Ä–æ–ª–ª–µ—Ä–∞–º–∏ –∏ —Ç–æ–ø–∏–∫–æ–º —Å 3 –ø–∞—Ä—Ç–∏—Ü–∏—è–º–∏ –∏ —Ä–µ–ø–ª–∏–∫–∞—Ü–∏–µ–π**

![kafka_cluster_scheme.png](kafka_cluster_scheme.png)

## –ö–∞–∫ —É–∫–∞–∑–∞—Ç—å –ø–∞—Ä—Ç–∏—Ü–∏–∏ –∏ —Ä–µ–ø–ª–∏–∫–∞—Ü–∏—é –ø—Ä—è–º–æ –≤ application.yml Spring Boot

–í Spring Boot –¥–ª—è Kafka –º–æ–∂–Ω–æ —É–∫–∞–∑–∞—Ç—å –∫–æ–ª–∏—á–µ—Å—Ç–≤–æ –ø–∞—Ä—Ç–∏—Ü–∏–π –∏ —Ñ–∞–∫—Ç–æ—Ä —Ä–µ–ø–ª–∏–∫–∞—Ü–∏–∏
–ø—Ä—è–º–æ –≤ `application.yml`, –Ω–æ –≤–∞–∂–Ω–æ –ø–æ–Ω–∏–º–∞—Ç—å:

* –≠—Ç–∏ –ø–∞—Ä–∞–º–µ—Ç—Ä—ã —Ä–∞–±–æ—Ç–∞—é—Ç **—Ç–æ–ª—å–∫–æ –ø—Ä–∏ –∞–≤—Ç–æ–º–∞—Ç–∏—á–µ—Å–∫–æ–º —Å–æ–∑–¥–∞–Ω–∏–∏ —Ç–æ–ø–∏–∫–∞** (–µ—Å–ª–∏
  –≤–∫–ª—é—á–µ–Ω `auto-create-topics`).
* –î–ª—è —ç—Ç–æ–≥–æ –∏—Å–ø–æ–ª—å–∑—É–µ—Ç—Å—è `spring.kafka.admin` –∏ –∫–ª–∞—Å—Å `NewTopic` —á–µ—Ä–µ–∑ –±–∏–Ω.

–ü—Ä–∏–º–µ—Ä –∫–æ–Ω—Ñ–∏–≥—É—Ä–∞—Ü–∏–∏ –≤ `application.yml`:

```yaml
spring:
  kafka:
    bootstrap-servers: localhost:9092
    admin:
      properties:
        # –í–∫–ª—é—á–∞–µ—Ç KafkaAdmin –¥–ª—è —Å–æ–∑–¥–∞–Ω–∏—è —Ç–æ–ø–∏–∫–æ–≤
        bootstrap.servers: localhost:9092
    topic:
      name: user-topic
      partitions: 3
      replication-factor: 1
```

### –ö–∞–∫ —ç—Ç–æ –ø—Ä–∏–º–µ–Ω–∏—Ç—å –≤ –∫–æ–¥–µ:

–°–æ–∑–¥–∞–π –±–∏–Ω, –∫–æ—Ç–æ—Ä—ã–π –ø—Ä–æ—á–∏—Ç–∞–µ—Ç –Ω–∞—Å—Ç—Ä–æ–π–∫–∏ –∏ —Å–æ–∑–¥–∞—Å—Ç —Ç–æ–ø–∏–∫:

```kotlin
import org.apache.kafka.clients.admin.NewTopic
import org.springframework.context.annotation.Bean
import org.springframework.context.annotation.Configuration
import org.springframework.beans.factory.annotation.Value

@Configuration
class KafkaTopicConfig(
    @Value("\${spring.kafka.topic.name}") private val topicName: String,
    @Value("\${spring.kafka.topic.partitions}") private val partitions: Int,
    @Value("\${spring.kafka.topic.replication-factor}") private val replicationFactor: Short
) {
    @Bean
    fun topic(): NewTopic {
        return NewTopic(topicName, partitions, replicationFactor)
    }
}
```

---

‚úÖ –¢–∞–∫–∏–º –æ–±—Ä–∞–∑–æ–º:

* –ù–∞—Å—Ç—Ä–æ–π–∫–∏ (–∏–º—è —Ç–æ–ø–∏–∫–∞, –ø–∞—Ä—Ç–∏—Ü–∏–∏, —Ä–µ–ø–ª–∏–∫–∞—Ü–∏—è) –Ω–∞—Ö–æ–¥—è—Ç—Å—è –≤ **application.yml**.
* Spring Boot –ø—Ä–∏ —Å—Ç–∞—Ä—Ç–µ —Å–æ–∑–¥–∞—Å—Ç —Ç–æ–ø–∏–∫ —á–µ—Ä–µ–∑ `KafkaAdmin`.
* –†–∞–±–æ—Ç–∞–µ—Ç —Ç–æ–ª—å–∫–æ –µ—Å–ª–∏ Kafka —Ä–∞–∑—Ä–µ—à–∞–µ—Ç –∞–≤—Ç–æ—Å–æ–∑–¥–∞–Ω–∏–µ —Ç–æ–ø–∏–∫–æ–≤ –∏–ª–∏ –µ—Å–ª–∏
  `KafkaAdmin` –∏–º–µ–µ—Ç –ø—Ä–∞–≤–∞ —Å–æ–∑–¥–∞–≤–∞—Ç—å —Ç–æ–ø–∏–∫–∏.

